datasource db {
  provider = "mysql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

//

model User {
  id                Int                 @id @default(autoincrement())
  email             String?             @unique
  username          String?             @unique
  token             String              @unique
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  
  ouathProviders    OauthProvider[]
  Donation          Donation[]
  DonationVariation DonationVariation[]
}

//

enum OauthProviderType {
  TWITCH
  YOUTUBE
}

model OauthProvider {
  id           Int               @id @default(autoincrement())
  accessToken  String
  refreshToken String
  profileId    String
  type         OauthProviderType
  createdAt    DateTime          @default(now())
  updatedAt    DateTime          @updatedAt
  
  user         User              @relation(fields: [userId], references: [id])
  userId       Int
}

// 

model Donation {
  id        Int      @id @default(autoincrement())
  amount    Int
  sender    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
}

// 

model DonationVariation {
  id        Int      @id @default(autoincrement())
  text      String?
  sender    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  user      User     @relation(fields: [userId], references: [id])
  userId    Int
}
